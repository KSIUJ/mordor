<!DOCTYPE html>
<html lang="en"
      layout:decorate="~{layout}">
<head>
    <title th:text="${title}">Mordor</title>
</head>
<body>
<div layout:fragment="content">

    <div th:replace="components/breadcrumb :: breadcrumb (path=${path}, dir=${dir})"/>

    <div th:if="${children.empty}">
        <div>There are no files here.</div>
    </div>

    <ul th:unless="${children.empty}" class="list-group list-group-flush">
        <th:block th:each="entry, iter : ${children}">
            <li class="list-group-item align-items-center">
                <i th:if="${entry.thumbnailPath == null}" th:attr="class='mx-2 fas fa-lg ' + ${entry.iconName}"></i>
                <img th:if="${entry.thumbnailPath != null}" th:src="${entry.thumbnailPath}" th:width="30" th:heigth="30"/>

                <a th:attr="href='/file/'+${entry.path}" th:text="${entry.name}"></a>

                <a class="btn btn-danger float-right"
                   href="#"
                   data-toggle="modal" th:attr="data-target='#confirm'+${iter.index}"
                   sec:authorize="hasRole('ROLE_MANAGE_FILES')"><i class="fas fa-trash"></i></a>
            </li>
            <div th:replace="components/confirmation_modal :: confirmation-modal (id='confirm'+${iter.index}, message='Do you really want to remove this file?', action='/delete/' + ${entry.relativePath}, method='delete')"/>
        </th:block>
    </ul>

</div>
</body>
</html>
